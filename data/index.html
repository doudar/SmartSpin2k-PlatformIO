<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <title>SmartSpin2k</title>
  <style>html{background-color:#03245c}</style>
</head>
<body>
  <div class="page-container">
    <header>
      <nav aria-label="Main navigation">
        <a href="http://github.com/doudar/SmartSpin2k" class="github-link">GitHub</a>
      </nav>
    </header>

    <main>
      <h1 class="brand">SmartSpin2k</h1>
      
      <div class="menu-grid">
        <a href="shift.html" class="menu-item">
          <div class="menu-content">
            <h2>Web Shifter</h2>
            <p>Control gear shifting manually</p>
          </div>
        </a>

        <a href="hrtowatts.html" class="menu-item">
          <div class="menu-content">
            <h2>Heart Rate to Watts</h2>
            <p>Configure power estimation from heart rate</p>
          </div>
        </a>

        <a href="settings.html" class="menu-item">
          <div class="menu-content">
            <h2>Settings</h2>
            <p>Configure device settings and preferences</p>
          </div>
        </a>

        <a href="bluetoothscanner.html" class="menu-item">
          <div class="menu-content">
            <h2>Bluetooth Scanner</h2>
            <p>Connect and manage Bluetooth devices</p>
          </div>
        </a>

        <a href="develop.html" class="menu-item">
          <div class="menu-content">
            <h2>Developer Tools</h2>
            <p>Advanced tools and debugging options</p>
          </div>
        </a>
      </div>

      <footer>
        <a href="https://github.com/doudar/SmartSpin2k/wiki" class="help-link">SS2K Help</a>
        <div class="version-info">
          <span id="firmwareVersion">loading</span>
        </div>
      </footer>
    </main>
  </div>

  <script>
    function requestConfigValues() {
      fetch('/configJSON')
        .then(response => response.json())
        .then(data => {
          document.getElementById("firmwareVersion").textContent = data.firmwareVersion;
        })
        .catch(error => console.error('Error:', error));
    }

    function loadCss() {
      const link = document.createElement('link');
      link.rel = 'stylesheet';
      link.href = 'style.css';
      document.head.appendChild(link);
    }

    window.addEventListener('load', () => {
      setTimeout(loadCss, 100);
      requestConfigValues();
    });

    // Retry loading firmware version if it's still showing "loading"
    setInterval(() => {
      if (document.getElementById("firmwareVersion").textContent === "loading") {
        requestConfigValues();
      }
    }, 1000);
  </script>
</body>
</html>
